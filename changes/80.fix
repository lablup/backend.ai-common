Update for batch-type session refactor/fix, adding `cancel_tasks()` utility function and improving type annotations of the utils module
